## Phaser 类简介
Phaser 类是一种同步机制，用于控制以并发方式划分为多个阶段的算法的执行。  
如果处理过程已有明确定义的步骤，那么必须在开始第二个步骤之前完成第一步的工作，以此类推，并且可以使用 Phaser 类实现该过程的并发版本。   

Phaser 类的主要特征有以下几点。
-	分段器（phaser）必须知道要控制的任务数。  
Java 称之为参与者的注册机制。参与者可以随时在分段器中注册。

-	任务完成一个阶段之后必须通知分段器。  
在所有参与者都完成该阶段之前，分段器将使该任务处于休眠状态。
-	在内部，分段器保存了一个整数值，该值存储分段器已经进行的阶段变更数目。
-	参与者可以随时脱离分段器的控制。  
Java 将这一过程称为参与者的注销。
-	当分段器做出阶段变更时，可以执行定制的代码。
-	控制分段器的终止。  
如果一个分段器终止了，就不再接受新的参与者，也不会进行任务之间的同步。
-	通过一些方法获得分段器的参与者数目及其状态。

### 参与者的注册与注销
一个分段器必须知道其控制的任务数目，必须知道正在执行划分为多个阶段的算法的不同线程数目，以便正确控制同时发生的阶段变更。  
Java 将此过程称作参与者的注册。  

正常情况下，参与者在执行开始时注册，但是也可以随时注册。

可以采用不同方式注册参与者，如下所示。
-	创建 Phaser 对象时：Phaser 类提供了四个不同的构造函数。  
其中常用的有两个。  
	-	`Phaser()` ：该构造函数创建了一个 0 个参与者的分段器。  
	-	`Phaser(int parties)` ：该构造函数创建了一个含有给定数目参与者的分段器。  
-	还可以通过下述方法显式创建。  
	-	`bulkRegisterl(int parties)` ：同时注册给定数目的新参与者 。  
	-	`register()` ：注册一个新参与者。    
	
分段器控制的任务完成执行时，必须从分段器注销。  
如果不这样做，分段器就会在下一阶段变更中一直等待该任务。  

注销一个参与者，可以使用 `arriveAndDeregister()` 方法。  
使用该方法告知分段器该任务已经完成了当前阶段，而且不再参与下一阶段。

